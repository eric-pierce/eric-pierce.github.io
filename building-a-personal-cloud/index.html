<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Building a Personal Cloud - eric-pierce.com</title><meta name=description content="Data Science, Projects, Travel and More"><meta property="og:title" content="Building a Personal Cloud">
<meta property="og:description" content="Like many others, I have numerous services which I use frequently for work, fun, productivity, and more. While using third party services is the easiest and fastest way to fulfill a need, it is far from the most privacy friendly, or depending on your view the most secure. I decided that I wanted to change that, and in 2019 I began to replace third party hosted services with services I can host on a personal Virtual Private Server, and have complete control of the data."><meta property="og:type" content="article"><meta property="og:url" content="https://eric-pierce.com/building-a-personal-cloud/"><meta property="og:image" content="https://eric-pierce.com/building-a-personal-cloud/docker.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-28T17:16:19-06:00"><meta property="article:modified_time" content="2020-11-28T17:16:19-06:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://eric-pierce.com/building-a-personal-cloud/docker.jpg"><meta name=twitter:title content="Building a Personal Cloud"><meta name=twitter:description content="Like many others, I have numerous services which I use frequently for work, fun, productivity, and more. While using third party services is the easiest and fastest way to fulfill a need, it is far from the most privacy friendly, or depending on your view the most secure. I decided that I wanted to change that, and in 2019 I began to replace third party hosted services with services I can host on a personal Virtual Private Server, and have complete control of the data."><meta name=application-name content="eric-pierce.com"><meta name=apple-mobile-web-app-title content="eric-pierce.com"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://eric-pierce.com/building-a-personal-cloud/><link rel=next href=https://eric-pierce.com/mask-detection-with-computer-vision/><link rel=stylesheet href=/css/page.min.css><link rel=stylesheet href=/css/home.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Building a Personal Cloud","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/eric-pierce.com\/building-a-personal-cloud\/"},"image":[{"@type":"ImageObject","url":"https:\/\/eric-pierce.com\/building-a-personal-cloud\/docker.jpg","width":979,"height":337}],"genre":"posts","keywords":"Docker","wordcount":1118,"url":"https:\/\/eric-pierce.com\/building-a-personal-cloud\/","datePublished":"2020-11-28T17:16:19-06:00","dateModified":"2020-11-28T17:16:19-06:00","publisher":{"@type":"Organization","name":"xxxx","logo":"https:\/\/eric-pierce.com\/images\/avatar.webp"},"author":{"@type":"Person","name":"Eric"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=eric-pierce.com>eric-pierce.com</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/about/>About </a><a class=menu-item href=/now/>Now </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=https://github.com/eric-pierce title=GitHub rel="noopener noreffer" target=_blank><i class='fa-brands fa-github fa-fw'></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=# class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fa-solid fa-search fa-fw"></i>
</a><a href=# class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fa-solid fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin"></i>
</span></span><a class=menu-item href=/index.xml title=RSS><i class="fa-solid fa-rss fa-fw" title=RSS></i> </a><a href=# onclick=return!1 class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=eric-pierce.com>eric-pierce.com</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=# class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fa-solid fa-search fa-fw"></i>
</a><a href=# class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fa-solid fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></div><a href=# class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/about/ title>About</a><a class=menu-item href=/now/ title>Now</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=https://github.com/eric-pierce title=GitHub rel="noopener noreffer" target=_blank><i class='fa-brands fa-github fa-fw'></i></a><div class=menu-item><a href=/index.xml title=RSS><i class="fa-solid fa-rss fa-fw" title=RSS></i> </a><span>&nbsp;|&nbsp;</span><a href=# onclick=return!1 class=theme-switch title="Switch Theme">
<i class="fa-solid fa-adjust fa-fw"></i></a></div></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single" data-toc=enable><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/building-a-personal-cloud/docker.jpg data-srcset="/building-a-personal-cloud/docker.jpg, /building-a-personal-cloud/docker.jpg 1.5x, /building-a-personal-cloud/docker.jpg 2x" data-sizes=auto alt=/building-a-personal-cloud/docker.jpg title=/building-a-personal-cloud/docker.jpg></div><div class=single-card data-image=true><h2 class="single-title animated flipInX">Building a Personal Cloud</h2><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fa-solid fa-user-circle fa-fw"></i>Eric</a></span>&nbsp;<span class=post-category>published in <a href=/categories/self-hosting/><i class="fa-regular fa-folder fa-fw"></i>Self Hosting</a></span></div><div class=post-meta-line><span><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-11-28>2020-11-28</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;1118 words</span>&nbsp;
<span><i class="fa-regular fa-clock fa-fw"></i>&nbsp;6 minutes</span>&nbsp;</div></div><hr><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#hosting-locations>Hosting Locations</a></li><li><a href=#web-applications-hosted-behind-wireguard-vpn>Web Applications hosted behind Wireguard VPN</a></li><li><a href=#non-open-web-accessible-applications>Non-Open-web accessible applications</a></li><li><a href=#open-web-accessible-applications>Open-web accessible applications</a></li><li><a href=#possible-future-services>Possible Future Services</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>Like many others, I have numerous services which I use frequently for work, fun, productivity, and more. While using third party services is the easiest and fastest way to fulfill a need, it is far from the most privacy friendly, or depending on your view the most secure. I decided that I wanted to change that, and in 2019 I began to replace third party hosted services with services I can host on a personal Virtual Private Server, and have complete control of the data. Below is a summary of the replacements I made:</p><h3 id=hosting-locations>Hosting Locations</h3><p><strong>Self-Hosted - Cloud</strong></p><ul><li>Google Contacts | Nextcloud Contacts</li><li>Google Calendar | Nextcloud Calendar</li><li>Dropbox | Nextcloud / Cryptomator</li><li>iCloud Notes | Standardnotes</li><li>Text File | Nextcloud Tasks / 2do</li><li>Lastpass | Vaultwarden</li><li>Pocket | Wallabag</li><li>Feedly | TT-RSS</li><li>TeamViewer | MeshCentral</li><li>Nothing | Firefox Sync Server</li><li>Nothing | Restic Backup to Backblaze</li><li>Nothing | Tandoor Recipes</li></ul><p><strong>Self-Hosted - Local</strong></p><ul><li>Nothing | PiHole + Unbound + DoH</li><li>Nothing | PiVPN - Wireguard</li><li>iCloud Computer Backup | NAS Time Machine</li><li>Amazon Cloudcam | DaFang Hacks / VLC / Telegram</li></ul><p>I also took this opportunity to move from Gmail to ProtonMail for email. While email can be self-hosted as well, I felt that swapping the very privacy-unfriendly Google service for a trusted encrypted solutions provider (ProtonMail) met my goal.</p><p>In 2020 I went through a migration from Traefik 1.7 to 2.4, and took the opportunity to completely revamp my self hosting approach, applications, best practices, security, and more. I&rsquo;m hosting everything on a Contabo VPS and on a local Raspberry Pi.</p><p><strong>Local Raspberry Pi</strong></p><ul><li><a href=https://nlnetlabs.nl/projects/unbound/about/ target=_blank rel="noopener noreffer">Unbound</a> - Local recursive DNS resolver</li><li><a href=https://pi-hole.net/ target=_blank rel="noopener noreffer">PiHole</a> - DNS black hole</li><li><a href=https://www.pivpn.io/ target=_blank rel="noopener noreffer">Wireguard (PiVPN)</a> - VPN Access through PiVPN</li></ul><p>I bought several cheap Wyze 2.0 Cameras and put the <a href=https://github.com/EliasKotlyar/Xiaomi-Dafang-Hacks target=_blank rel="noopener noreffer">DaFang custom firmware</a> on them this lets me VPN into my home network and connect to network streams from the cameras using VLC on my phone. I have motion detection notifications running through Telegram with stills taken when motion is detected</p><p><strong>Contabo VPS - 9 Euro per month, 6 Cores, 16GB Ram, 400GB Storage (SSD)</strong></p><p>As part of my security updates, I decided that some services I host had no business being externally accessible, even when they&rsquo;re behind HTTP authentication. I set up wireguard docker image to allow me to access my VPS over VPN, and then modified wireguard&rsquo;s Coredns to allow me to access the services I want on the domains I would have previously accessed externally. I followed <a href=https://noobgasm.com/tutorial-additional-protection-with-wireguard/ target=_blank rel="noopener noreffer">this guide</a> for that.</p><p>Other security updates include moving to official images for everything, leveraging Cloudflare&rsquo;s proxy service for any web based applications (though some may argue this isn&rsquo;t as good for privacy), and moving to docker secrets where possible</p><p>I also moved to a socket proxy for the docker socket rather than allowing any images (except for the socket proxy itself) direct access to the docker socket.</p><p>Everything except fail2ban on my Contabo VPS are sourced from docker images.</p><h3 id=web-applications-hosted-behind-wireguard-vpn>Web Applications hosted behind Wireguard VPN</h3><ul><li><a href=https://www.portainer.io/ target=_blank rel="noopener noreffer">Portainer</a> - Docker Management</li><li><a href=https://www.phpmyadmin.net/ target=_blank rel="noopener noreffer">PhpMyAdmin</a> - Management of a MariaDB database for applications which don&rsquo;t support Postgres</li><li><a href=https://www.pgadmin.org/ target=_blank rel="noopener noreffer">PgAdmin</a> - Management of a Postgres database for any applications which do support Postgres</li><li><a href=https://github.com/joeferner/redis-commander target=_blank rel="noopener noreffer">Redis Commander</a> (Currently Disabled) - for managing my Redis Memcache installation to speed up Nextcloud</li></ul><h3 id=non-open-web-accessible-applications>Non-Open-web accessible applications</h3><ul><li><a href=https://github.com/fluencelabs/docker-socket-proxy target=_blank rel="noopener noreffer">Docker Socket Proxy</a> - This allows applications to access only the services they need from the socket proxy and nothing else</li><li><a href=https://github.com/containrrr/watchtower target=_blank rel="noopener noreffer">Watchtower</a> - Docker image updates, used as Ouroborus is no longer actively updated</li><li><a href=https://mariadb.org/ target=_blank rel="noopener noreffer">MariaDB</a> - Open source MySQL server for applications which don&rsquo;t support my preferred SQL server, Postgres</li><li><a href=https://www.postgresql.org/ target=_blank rel="noopener noreffer">Postgres</a> - Open source SQL server for applications which it</li><li><a href=https://redis.io/ target=_blank rel="noopener noreffer">Redis</a> - Memcache to speed up Nextcloud</li><li><a href=https://github.com/djmaze/resticker target=_blank rel="noopener noreffer">Restic/Resticker</a> - This is a docker image which contains a parameterized version of Restic, for automated, encrypted, incremental backups. I&rsquo;m backing up to a Backblaze B2 bucket which is low cost and use based.</li></ul><h3 id=open-web-accessible-applications>Open-web accessible applications</h3><ul><li><a href=https://traefik.io/ target=_blank rel="noopener noreffer">Traefik 2.4</a> - used for reverse proxying open-web applications</li><li><a href=https://github.com/mozilla-services/syncserver target=_blank rel="noopener noreffer">Firefox Syncserver</a> (MariaDB) - this is in the process of being moved to Rust, but that image isn&rsquo;t ready yet. Still using the old python 2.7 version to sync browser settings, extension lists, and bookmarks.</li><li><a href=https://www.wallabag.it/en target=_blank rel="noopener noreffer">Wallabag</a> (Postgres) - Pocket replacement, this integrates very well with iOS and allows me to &ldquo;stash&rdquo; anything I come across on twitter, reddit, browsing, and more. I also have Wallabag set up as an RSS feed so when I stash something it shows up in my RSS reader.</li><li><a href=https://nextcloud.com target=_blank rel="noopener noreffer">Nextcloud</a> (Postgres) - primarily used as Google replacement, and I use it for Contacts, Calendar, Drive, and Tasks/ToDo hosting</li><li><a href=https://github.com/linuxserver/docker-wireguard target=_blank rel="noopener noreffer">Wireguard</a> - allows me to access internal services via VPN. This is one of the few &ldquo;unofficial&rdquo; images I use from linuxserver.io as I don&rsquo;t think wireguard hosts an official one</li><li><a href=https://tt-rss.org/ target=_blank rel="noopener noreffer">Tiny-Tiny-RSS</a> (Postgres) - Last year the developer created official docker images, so I moved from an unofficially maintained one to the official ones. This consists of a backend and frontend component, as well as an updater cron job. I much prefer this approach as the unofficial image wasn&rsquo;t static, and was just an older docker image that pulled the latest version of the app from Git.</li><li><a href=https://github.com/dani-garcia/vaultwarden target=_blank rel="noopener noreffer">Vaultwarden</a> (Postgres) - This is the unofficial bitwarden api/backend/frontend implementation in Rust. I moved from the default sqlite backend to a postgres backend and found that it is now much speedier when updating folders</li><li><a href=https://github.com/standardnotes/standalone target=_blank rel="noopener noreffer">Standardnotes Sync Server</a> (MariaDB) - This is the official backend implementation for standardnotes. I was using the Nextcloud Notes before, but wasn&rsquo;t happy with the mobile app experience (manual sync over webdav in the Notebooks app). The official iOS app is just as seamless as the native iPhone notes app. This backend server was recently re-written in JavaScript (previously Ruby on Rails). I am not using the recommended &ldquo;script&rdquo; based implementation here as I prefer more control over containers and architecture, so I&rsquo;ve implemented the standalone containers directly in my docker-compose file.</li><li><a href=https://github.com/standardnotes/web target=_blank rel="noopener noreffer">Standardnotes Web App</a> - the web frontend for standardnotes</li><li><a href=https://github.com/eric-pierce/standardnotes-extension-server target=_blank rel="noopener noreffer">Standardnotes Extensions</a> - This is a docker image which contains all the open source extensions for standardnotes. It&rsquo;s very simple to run, and lets you use several high powered extensions all self-hosted. I forked this and added additional themes and services.</li><li><a href=https://github.com/Ylianst/MeshCentral target=_blank rel="noopener noreffer">MeshCentral</a> - This is a complete replacement for TeamViewer, and enables remote access to my devices without needing to use a third party service. The only downside I&rsquo;ve found here is that there isn&rsquo;t a native mobile app.</li><li><a href=https://github.com/vabene1111/recipes target=_blank rel="noopener noreffer">Tandoor Recipes</a> - App for self-hosting and sharing recipes. With family members spread out this is a great way to connect around favorite recipes and meal planning.</li></ul><h3 id=possible-future-services>Possible Future Services</h3><ul><li>Bookstack</li><li>Papermerge</li><li>Monica CRM</li><li>fail2ban - may move it into a container</li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-tag><span><a href=/tags/docker/>Docker</a></span></div><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-11-28</span></div><div class=post-info-mod></div></div></div><div class=post-nav><a href=/mask-detection-with-computer-vision/ class=next rel=next title="Mask Detection With Computer Vision">Next Post<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw"></i><span itemprop=copyrightYear>2024</span>&nbsp;|&nbsp;<span class=license>eric-pierce.com</span></div></div><script>"serviceWorker"in navigator&&(navigator.serviceWorker.register("/sw.min.js?version=1.0.1",{scope:"/"}).then(()=>{console.info("eric-pierce.com Service Worker Registered")},e=>console.error("eric-pierce.com Service Worker registration failed: ",e)),navigator.serviceWorker.ready.then(()=>{console.info("eric-pierce.com Service Worker Ready")}))</script></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fa-solid fa-chevron-up fa-fw"></i></a></div><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script src=/lib/autocomplete/autocomplete.min.js></script><script src=/lib/lunr/lunr.min.js></script><script src=/lib/lazysizes/lazysizes.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script src=/js/theme.min.js></script></body></html>